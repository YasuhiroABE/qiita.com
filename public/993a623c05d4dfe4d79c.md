---
title: VMware Workstation 16 Pro„Åßvctl kind„ÇíË©¶„Åó„Å¶„Åø„Åü
tags:
  - vmware
  - kubernetes
private: false
updated_at: '2024-05-16T13:02:25+09:00'
id: 993a623c05d4dfe4d79c
organization_url_name: null
slide: false
ignorePublish: false
---
:::note
‰∏ÄÂøúvctl kind„ÅåÂà©Áî®„Åß„Åç„Çã„Å®„ÅÑ„ÅÜ„ÅÆ„ÅßË©¶„Åó„Å¶„Åø„Åæ„Åó„Åü„Åå„ÄÅ„Åõ„Å£„Åã„ÅèVMware Workstation Pro„ÇíÂÆüË°å„Åó„Å¶„ÅÑ„Çã„ÅÆ„ÅßË§áÊï∞VM„Çí‰ΩúÊàê„Åó„Å¶kubespray„ÅßÊú¨Áâ©„ÅÆk8s„ÇØ„É©„Çπ„Çø„Éº„ÇíÊßãÁØâ„Åô„ÇãÊñπ„Åå„ÉÜ„Çπ„ÉàÁí∞Â¢É„Å®„Åó„Å¶„ÅØÊ±éÁî®ÊÄß„ÅåÈ´ò„ÅÑ„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÇ

CustomController„ÅÆ‰ΩúÊàê„ÇÑDeployment, StatefulSet„ÅÆÂ≠¶Áøí„Å´„Åó„Å¶„ÇÇrook.io„Å™„Å©„ÅßStorageClass„ÅåÊ∫ñÂÇô„Åß„Åç„ÇãÁí∞Â¢É„Çí„ÅäÂãß„ÇÅ„Åó„Åæ„Åô„ÄÇ
:::

# „ÅØ„Åò„ÇÅ„Å´

VMware Workstation 16 Pro/Player„ÅØ„ÄÅkubernetes„ÇØ„É©„Çπ„Çø„Éº„ÇíÊßãÁØâ„Åß„Åç„Çã„Å®ÂÆ£‰ºù„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ
Fusion 12„ÇÇÂêåÊßò„ÅÆÊ©üËÉΩ„ÇíÊåÅ„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ„ÇÄ„Åó„ÇçFusion 12„ÅÆÁõÆÁéâÊ©üËÉΩ„Å®„Åó„Å¶„Éã„É•„Éº„Çπ„Çµ„Ç§„Éà„Å´Êé≤Ëºâ„Åï„Çå„Å¶„ÅÑ„ÇãË®ò‰∫ã„ÇÇ„ÅÇ„Çã„ÅÆ„Åß„ÄÅWorkstaitonÁâà„Åß„ÇÇÂãï„Åè„Å®„ÅØ„Åô„Åê„Å´„ÅØÊ∞ó„Åå„Å§„Åç„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ

VMware„ÅÆÂÖ¨Âºè„Éû„Éã„É•„Ç¢„É´„ÅØ„ÄÅ‰Ωï„Çí„Åó„Åü„ÇâËâØ„ÅÑ„ÅãÂàÜ„Åã„Çâ„Å™„ÅÑÂàùÂøÉËÄÖ„Å´„ÅØÂçÅÂàÜ„Åß„Å™„ÅÑ„Å®ÊÑü„Åò„Åü„ÅÆ„Åß„ÄÅ„É°„É¢„ÇíÊÆã„Åô„Åì„Å®„Å´„Åó„Åæ„Åó„Åü„ÄÇ

# Áí∞Â¢É

* VMware Workstation 16.1 Pro
* ThinkPad T480 (i7-8550u, 32GB, 2TB NVMe SSD)

# ÂèÇËÄÉË≥áÊñô

* [vmwareÂÖ¨Âºè„Ç¨„Ç§„Éâ - KIND „ÇíÊúâÂäπ„Å´„Åó„Å¶ vctl „Ç≥„É≥„ÉÜ„Éä„Çí„Éé„Éº„Éâ„Å®„Åó„Å¶‰ΩøÁî®„Åó„Åü Kubernetes „ÇØ„É©„Çπ„Çø„ÅÆÂÆüË°å](https://docs.vmware.com/jp/VMware-Workstation-Pro/16.0/com.vmware.ws.using.doc/GUID-1CA929BB-93A9-4F1C-A3A8-7A3A171FAC35.html)
* [VMware Fusion v12 ‚Äì Kubernetes / Kind integration](https://cormachogan.com/2020/09/17/vmware-fusion-v12-kubernetes-kind-integration/)

# ÂÆüÈöõ„ÅÆ‰ΩúÊ•≠

„Åæ„ÅöÂÖ¨Âºè„Ç¨„Ç§„Éâ„Åß„ÅØ„ÄÅVMWare„Éõ„Çπ„Éà„ÅÆPowerShellÁ≠âÁ´ØÊú´‰∏ä„Åßvctl„ÇíÂà©Áî®„Åó„Å¶Ê¨°„ÅÆ„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åô„Çã„Çà„ÅÜ„Å´Ë®òËø∞„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ

* vctl system start
* vctl kind

```powershell:‰∏ÄËà¨„É¶„Éº„Ç∂„Éº„ÅÆÊ®©Èôê„Åß„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å
PS C:\Users\yasu> vctl system start
Preparing storage...
Container storage has been prepared successfully under C:\Users\yasu\.vctl\storage
Preparing container network...
Container network has been prepared successfully using vmnet: vmnet8
Launching container runtime...
Container runtime has been started.
PS C:\Users\yasu> vctl kind
```

„Åì„Åì„Åæ„ÅßÂÆüË°å„Åô„Çã„Å®Âà•„Ç¶„Ç£„É≥„Éâ„Ç¶„ÅåÈñã„Åç„Åæ„Åô„Åå„ÄÅ„Åì„Åì„Åã„ÇâÂÖà„Å´‰Ωï„Çí„Åô„Çå„Å∞ËâØ„ÅÑ„ÅÆ„ÅãÂÖ¨Âºè„Ç¨„Ç§„Éâ„Åß„ÅØÂçÅÂàÜ„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ

„Åì„ÅÆÁä∂ÊÖã„Åß„ÄÅkubectl„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åó„Å¶„ÇÇ„Çµ„Éº„Éê„Éº„ÅåËµ∑Âãï„Åó„Å¶„ÅÑ„Å™„ÅÑ„Åì„Å®„ÅåÂàÜ„Åã„Çä„Åæ„Åô„ÄÇ

```powershell:Âà•„Å´Èñã„ÅÑ„Åü„Ç¶„Ç£„É≥„Éâ„Ç¶‰∏ä„Åßkubectl„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å
PS C:\Users\yasu> kubectl get node
Unable to connect to the server: dial tcp [::1]:8080: connectex: No connection could be made because the target machine actively refused it.
```

Ê¨°„Å´ÂèÇËÄÉ„Å´„Åó„Åü„Éâ„Ç≠„É•„É°„É≥„Éà„Åã„Çâ„ÄÅ„ÇØ„É©„Çπ„Çø„Éº„Çí‰ΩúÊàê„Åó„Å¶„ÅÑ„Åæ„Åô„Åå„ÄÅ„Åì„Çå„ÅØÈÄöÂ∏∏„ÅÆkind„ÅÆÂà©Áî®ÊñπÊ≥ï„ÅÆ„Çà„ÅÜ„Åß„Åô„ÄÇkindÈñ¢ÈÄ£„ÅÆÊñáÊõ∏„Åß„ÅØÂõ∞„Å£„Åü„Çâlog„ÇíÂèÇÁÖß„Åô„Çã„Çà„ÅÜ„Å´„Å®Êõ∏„Åã„Çå„Å¶„ÅÑ„Åæ„Åô„Åå„ÄÅ„Åì„ÅÆÁí∞Â¢É„Åß„ÅØÂà©Áî®„Åß„Åç„Å™„ÅÑ„Çà„ÅÜ„Åß„Åô„ÄÇ

```text:VMwareÂÖ¨Âºè„Ç¨„Ç§„Éâ„Åã„ÇâÊäúÁ≤ã
vctl „ÅØ kind build „Åä„Çà„Å≥ kind export logs kind „Çµ„Éñ„Ç≥„Éû„É≥„Éâ„Çí„Çµ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ
```

„Åü„Å†„ÄÅÂÆüÈöõ„Å´export logs„ÇíÂÆüË°å„Åó„Å¶„Åø„Çã„Å®„É≠„Ç∞„ÅåÂá∫Âäõ„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ

```powershell
PS C:\Users\yasu> kind export logs
Exported logs for cluster "kind" to:
C:\Users\yasu\AppData\Local\Temp\103590923

PS C:\Users\yasu> cd C:\Users\yasu\AppData\Local\Temp\103590923
PS C:\Users\yasu\AppData\Local\Temp\103590923\kind-control-plane> ls


    „Éá„Ç£„É¨„ÇØ„Éà„É™: C:\Users\yasu\AppData\Local\Temp\103590923\kind-control-plane


Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
d-----        2020/11/23     19:55                containers
d-----        2020/11/23     19:55                pods
-a----        2020/11/23     19:55            375 alternatives.log
-a----        2020/11/23     19:55          30624 containerd.log
-a----        2020/11/23     19:55          12420 inspect.json
-a----        2020/11/23     19:55         165190 journal.log
-a----        2020/11/23     19:55         126832 kubelet.log
-a----        2020/11/23     19:55              7 kubernetes-version.txt
-a----        2020/11/23     19:55              0 serial.log
```

„Åì„Çå„ÅåÊúüÂæÖ„Å®ÈÅï„ÅÜÊåôÂãï„Å™„ÅÆ„Åã‰∏çÊòé„Åß„Åô„Åå„ÄÅÂæå„Åã„Çâ„É≠„Ç∞„ÅåÂá∫Âäõ„Åß„Åç„Çã„Åì„Å®„Å´Ê∞ó„Åå„Å§„ÅÑ„Åü„ÅÆ„Åß„ÄÅ‰ªäÂõû„ÅØ„Åì„ÅÆ„É≠„Ç∞„ÅØÂèÇËÄÉ„Å´„Åó„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ

kind„Åß„ÇØ„É©„Çπ„Çø„Éº„Çí‰ΩúÊàê„Åô„ÇãÂâç„Å´„ÄÅÊ≠£Â∏∏Á®ºÂãï„Åó„Å¶„ÅÑ„Å™„ÅÑÂ†¥Âêà„ÇÇ„ÅÇ„Çã„ÅÆ„Åß„ÄÅÂøÖ„Åö‰∫ãÂâç„Å´„ÇØ„É©„Çπ„Çø„Éº„ÅÆÊúâÁÑ°„ÇíÁ¢∫Ë™ç„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ

```powershell:„ÄêÁ¢∫Ë™ç„Äë„ÇØ„É©„Çπ„Çø„Éº„ÅåÂÆöÁæ©„Åï„Çå„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅØÂâäÈô§„Åó„Å¶„Åã„ÇâÁ∂öË°å
PS C:\Users\yasu> kind get clusters
kind
PS C:\Users\yasu> kind delete cluster
Deleting cluster "kind" ...
```

```kind get clusters```„ÅßÂÆöÁæ©„Åï„Çå„Å¶„ÅÑ„Çã„ÇØ„É©„Çπ„Çø„Éº„Åå„Å™„Åè„Å™„Å£„Å¶„Åã„Çâ„ÄÅ„ÇØ„É©„Çπ„Çø„Éº„Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇ

```powershell:Èñã„ÅÑ„ÅüÂà•„Ç¶„Ç£„É≥„Éâ„Ç¶„Åã„Çâ„ÇØ„É©„Çπ„Çø„Éº„ÅÆ‰ΩúÊàê
PS C:\Users\yasu> kind get clusters
No kind clusters found.

PS C:\Users\yasu> kind create cluster
Creating cluster "kind" ...
 [32m‚úì[0m Ensuring node image (kindest/node:v1.19.1) üñº
 [32m‚úì[0m Preparing nodes üì¶
 [32m‚úì[0m Writing configuration üìú
 [32m‚úì[0m Starting control-plane üïπÔ∏è
 [32m‚úì[0m Installing CNI üîå
 [32m‚úì[0m Installing StorageClass üíæ
Set kubectl context to "kind-kind"
You can now use your cluster with:

kubectl cluster-info --context kind-kind

Thanks for using kind! üòä
```

„Åì„Åì„Åæ„ÅßÊù•„Åü„Çâkubectl„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åó„Åæ„Åô„ÄÇ

```powershell
PS C:\Users\yasu> kubectl cluster-info --context kind-kind
Kubernetes master is running at https://127.0.0.1:62402
KubeDNS is running at https://127.0.0.1:62402/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy

To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.
```

„Å®„Çä„ÅÇ„Åà„Åökubelet„ÅåÊôÆÈÄö„Å´ÂÆüË°å„Åß„Åç„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åó„Åü„ÄÇ

```powershell:kubectl„ÅÆÂÆüË°å‰æã
PS C:\Users\yasu> kubectl get all --all-namespaces
NAMESPACE            NAME                                             READY   STATUS    RESTARTS   AGE
kube-system          pod/coredns-f9fd979d6-8wdwg                      1/1     Running   0          4m11s
kube-system          pod/coredns-f9fd979d6-w8ct6                      1/1     Running   0          4m11s
kube-system          pod/etcd-kind-control-plane                      1/1     Running   0          4m13s
kube-system          pod/kindnet-hmgtk                                1/1     Running   0          4m10s
kube-system          pod/kube-apiserver-kind-control-plane            1/1     Running   0          4m13s
kube-system          pod/kube-controller-manager-kind-control-plane   1/1     Running   0          4m13s
kube-system          pod/kube-proxy-tbcvt                             1/1     Running   0          4m11s
kube-system          pod/kube-scheduler-kind-control-plane            1/1     Running   0          4m13s
local-path-storage   pod/local-path-provisioner-78776bfc44-ll456      1/1     Running   0          4m4s

NAMESPACE     NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)                  AGE
default       service/kubernetes   ClusterIP   10.96.0.1    <none>        443/TCP                  4m28s
kube-system   service/kube-dns     ClusterIP   10.96.0.10   <none>        53/UDP,53/TCP,9153/TCP   4m21s

NAMESPACE     NAME                        DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR            AGE
kube-system   daemonset.apps/kindnet      1         1         1       1            1           <none>                   4m11s
kube-system   daemonset.apps/kube-proxy   1         1         1       1            1           kubernetes.io/os=linux   4m20s

NAMESPACE            NAME                                     READY   UP-TO-DATE   AVAILABLE   AGE
kube-system          deployment.apps/coredns                  2/2     2            2           4m21s
local-path-storage   deployment.apps/local-path-provisioner   1/1     1            1           4m4s

NAMESPACE            NAME                                                DESIRED   CURRENT   READY   AGE
kube-system          replicaset.apps/coredns-f9fd979d6                   2         2         2       4m11s
local-path-storage   replicaset.apps/local-path-provisioner-78776bfc44   1         1         1       4m4s
```

k8sÂÖ¨Âºè„Ç¨„Ç§„Éâ„ÅÆYAML„ÇíÂà©Áî®„Åó„Å¶ÊåôÂãï„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô„ÄÇ

* [Exposing an External IP Address to Access an Application in a Cluster](https://kubernetes.io/docs/tutorials/stateless-application/expose-external-ip-address/)

```powershell:„ÉÅ„É•„Éº„Éà„É™„Ç¢„É´„ÅÆÂÆüË°å
PS C:\Users\yasu> kubectl apply -f https://k8s.io/examples/service/load-balancer-example.yaml
deployment.apps/hello-world created

PS C:\Users\yasu> kubectl get pod
NAME                           READY   STATUS              RESTARTS   AGE
hello-world-6df5659cb7-9m9kx   0/1     ContainerCreating   0          48s
hello-world-6df5659cb7-cr7k9   0/1     ContainerCreating   0          48s
hello-world-6df5659cb7-pdgxg   0/1     ContainerCreating   0          48s
hello-world-6df5659cb7-r8wsv   0/1     ContainerCreating   0          48s
hello-world-6df5659cb7-wn5hd   0/1     ContainerCreating   0          48s

PS C:\Users\yasu> kubectl expose deployment hello-world --type=LoadBalancer --name=my-service
service/my-service exposed

PS C:\Users\yasu> kubectl get svc
NAME         TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1       <none>        443/TCP          95m
my-service   LoadBalancer   10.102.48.208   <pending>     8080:32715/TCP   14s
```

Ë™øÂ≠ê„Çà„ÅèÈÄ≤„Çì„Åß„Åç„Åæ„Åó„Åü„Åå„ÄÅLoadBalancer„ÅØÈÖçÁΩÆ„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑ„ÅÆ„ÅßÊ∞∏‰πÖ„Å´External-IP„ÅØpendingÁä∂ÊÖã„ÅÆ„Åæ„Åæ„Å®„Å™„Çä„Åæ„Åô„ÄÇ
„Éù„Éº„Éà„Éï„Ç©„ÉØ„Éº„Éâ„Å´„Çà„Å£„Å¶ÁâπÂÆö„ÅÆPod„ÇíÊåáÂÆö„Åó„Å¶„ÄÅ127.0.0.1„ÅÆÁâπÂÆö„Éù„Éº„Éà„Å´„Éï„Ç©„ÉØ„Éº„Éâ„Åï„Åõ„Çã„Åì„Å®„ÅåÂèØËÉΩ„Åß„Åô„ÄÇ

```powershell:
PS C:\Users\yasu> kubectl expose deployment hello-world --type=NodePort  --name=my-service2
service/my-service2 exposed

PS C:\Users\yasu> kubectl port-forward svc/my-service2 9090:8080
Forwarding from 127.0.0.1:9090 -> 8080
Forwarding from [::1]:9090 -> 8080
Handling connection for 9090
```

„Å®„Çä„ÅÇ„Åà„ÅöÂãï„Åç„Åæ„Åó„Åü„Åå„ÄÅÊú¨Êù•„Åß„ÅÇ„Çå„Å∞kindÊú¨ÂÆ∂„ÅÆ„Ç¨„Ç§„Éâ„ÇíË™≠„Çì„Åß„ÄÅingress controller„ÇíÈÖçÁΩÆ„Åô„Çã„Åπ„Åç„Å™„ÅÆ„Å†„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÇ
„Åü„Å†„ÄÅkind„ÇíÂà©Áî®„Åó„Å¶Êú¨Ê†ºÁöÑ„Å™Áí∞Â¢É„ÇíÊßãÁØâ„Åô„Çã„ÅÆ„Åß„ÅÇ„Çå„Å∞„ÄÅVMware‰∏ä„Å´3VM„Åê„Çâ„ÅÑ„ÇíËµ∑Âãï„Åó„Å¶„ÄÅkubespray„Åßfull-spec„Å™k8s„ÇØ„É©„Çπ„Çø„Éº„ÇíÊßãÁØâ„Åó„Å¶„ÄÅMetalLB„ÅßLoadBalancer„ÇíÊßãÁØâ„Åó„Åæ„Åô„ÄÇ

VMware Workstation Pro„ÅÆ„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØË®≠ÂÆö„ÅØÂº∑Âäõ„Åß„ÄÅËá™ÂàÜÁî®„Å´Èñâ„Åò„Åü10.1.1.0/24„ÅÆ„Çà„ÅÜ„Å™„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Çí‰Ωú„Å£„Åü„Çä„Åô„Çã„Åì„Å®„ÅØÁ∞°Âçò„Å´„Åß„Åç„Åæ„Åô„ÄÇVMware‰∏ä„ÅÆkind„ÅØNAT„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Å´Êé•Á∂ö„Åô„Çã„ÅÆ„Åå„Éá„Éï„Ç©„É´„ÉàË®≠ÂÆö„Å™„ÅÆ„Åß„ÄÅÂÖ¨Âºè„Ç¨„Ç§„Éâ„Å´„ÅÇ„Çã„Çà„ÅÜ„Å´Ë®≠ÂÆö„ÇíÂ§âÊõ¥„Åô„Çå„Å∞„ÄÅÂêåÊßò„Å´Âà•„ÅÆVMNet„Å´Êé•Á∂ö„Åß„Åç„Çã„ÅÆ„Å†„Å®ÊÄù„ÅÑ„Åæ„Åô„Åå„ÄÅ„ÅÑ„Åæ„ÅÆ„Å®„Åì„Çç„ÅØÂÄã‰∫∫ÁöÑ„Å´„ÅØÁ©çÊ•µÁöÑ„Å´Âà©Áî®„Åô„Çã„Å§„ÇÇ„Çä„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ

„Åì„Çå„ÅØÂæóÊÑèÂàÜÈáé„Åå‰Ωï„Å´„ÅÇ„Çã„ÅÆ„Åã„Å´‰æù„Çã„ÅÆ„Åã„Å®„ÅØÊÄù„ÅÑ„Åæ„Åô„Åå„ÄÅkind„ÅÆÁµåÈ®ì„ÅåÊú¨Áï™Áí∞Â¢É„Åß„ÇÇÊ¥ª„Åã„Åõ„Çã„Åã„Å®„ÅÑ„ÅÜ„Å®„ÄÅÊú¨Áï™„Å®„ÅÆÂ∑ÆÂàÜ„ÇíÂê∏Âèé„Åô„Çã„Éé„Ç¶„Éè„Ç¶„Å∞„Åã„Çä„ÅåËìÑÁ©ç„Åï„Çå„Çã„Çà„ÅÜ„Å™Âç∞Ë±°„ÅåÂº∑„ÅÑ„Åß„Åô„ÄÇ„Åì„ÅÆË¶≥ÁÇπ„Åß„ÅØkind„ÅÆ„Çà„ÅÜ„Å™„ÇΩ„É™„É•„Éº„Ç∑„Éß„É≥„ÅÆÂà©Áî®„ÅØÂÄã‰∫∫ÁöÑ„Å´„ÅØ„ÅÇ„Åæ„Çä„ÅäÂãß„ÇÅ„Åó„Åæ„Åõ„Çì„ÄÇ

„Å®„ÅØ„ÅÑ„Åàkubespray„ÇíÊé®„Åó„Å¶„ÇÇ„ÄÅ„Åì„Çå„ÅØ„Åì„Çå„ÅßÂïèÈ°å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åü„Å†Êú¨Áï™Áí∞Â¢É„Å®„ÉÜ„Çπ„ÉàÁí∞Â¢É„Çí„Åß„Åç„Çã„Å†„ÅëÂêå„Åò„Å´„Åó„Åü„ÅÑ„Å®„ÅÑ„ÅÜÂ∞èË¶èÊ®°Áí∞Â¢É„Åß„ÅÇ„Çå„Å∞„ÄÅÁèæÊôÇÁÇπ„Åß„ÅØ„Éô„Çπ„Éà„Å™ÈÅ∏Êäû„Å®ÊÄù„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ

# ÈÅ≠ÈÅá„Åó„Åü„Ç®„É©„Éº„Å´„Å§„ÅÑ„Å¶

ÊúÄÂàù„Å´Ë©¶„Åó„ÅüÊôÇ„Å´„ÅØ„ÄÅkind„Åß„ÇØ„É©„Çπ„Çø„Éº„ÅåÂÆüË°å„Åï„Çå„Å¶„ÅÑ„Çã„ÅØ„Åö„Å™„ÅÆ„Å´„ÄÅkubectl„Ç≥„Éû„É≥„Éâ„Åß„ÅØ„Ç®„É©„Éº„Å´„Å™„Å£„Å¶„Åó„Åæ„ÅÑ„Åæ„Åó„Åü„ÄÇ

```powershell:Âà•„Ç¶„Ç£„É≥„Éâ„Ç¶‰∏ä„Åßkubectl„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å
PS C:\Users\yasu> kubectl cluster-info --context kind-kind
To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.
Unable to connect to the server: net/http: TLS handshake timeout
```

Docker Desktop„ÇíÂ∞éÂÖ•„Åó„Å¶„ÅÑ„Çã„ÅÆ„Åß„ÄÅ~/.kube/config„Éï„Ç°„Ç§„É´„Å´„ÅØKind„ÅÆÂàÜ„ÅåÂä†„Çè„Å£„Å¶2„Å§„ÅÆcontext„ÅåÂÆöÁæ©„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ

Âà•„ÅÆWindows„Éû„Ç∑„É≥‰∏ä„Åß„ÄÅVMware Workstation 16 Player„ÇíÂà©Áî®„Åó„ÅüÈôê„Çä„Åß„ÅØ„ÄÅ„Åì„ÅÆÁä∂ÊÖã„ÅßÂïèÈ°å„Å™„ÅèÂãï„ÅÑ„Å¶„ÅÑ„Åæ„Åô„ÄÇ

ÊúÄÁµÇÁöÑ„Å´„ÅØÂÜçËµ∑Âãï„Åó„ÄÅVMware Workstation 16 Pro„ÅØËµ∑Âãï„Åõ„Åö„Å´PowerShell„ÅÆÁ´ØÊú´„ÇíÈñã„Åç„ÄÅvctl system start„Åã„ÇâÂÜçÂ∫¶ÂÆüË°å„ÅóÁÑ°‰∫ã„Å´Ëµ∑Âãï„Åó„Åæ„Åó„Åü„ÄÇ


## ÈÅ≠ÈÅá„Åó„Åü„Ç®„É©„Éº„Å´„Å§„ÅÑ„Å¶ ver.2

ÂâçËø∞„ÅÆ„Ç®„É©„Éº„Åß„ÅÑ„Çç„ÅÑ„ÇçË©¶„Åó„Å¶„ÅÑ„ÇãÊÆµÈöé„Åß„ÄÅ„Åæ„ÅüÂà•„ÅÆ„Ç®„É©„Éº„Å´ÈÅ≠ÈÅá„Åó„Å¶„ÇØ„É©„Çπ„Çø„Éº„Åå‰ΩúÊàê„Åß„Åç„Å™„Åè„Å™„Çä„Åæ„Åó„Åü„ÄÇ

```powershell
PS C:\Users\yasu> kind create cluster
Creating cluster "kind" ...
 [32m‚úì[0m Ensuring node image (kindest/node:v1.19.1) üñº
 [31m‚úó[0m Preparing nodes üì¶
[31mERROR[0m: failed to create cluster: docker run error: command "docker run --hostname kind-control-plane --name kind-control-plane --label io.x-k8s.kind.role=control-plane --privileged --security-opt seccomp=unconfined --security-opt apparmor=unconfined --tmpfs /tmp --tmpfs /run --volume /var --volume /lib/modules:/lib/modules:ro --detach --tty --label io.x-k8s.kind.cluster=kind --net kind --restart=on-failure:1 --publish=127.0.0.1:63985:6443/TCP kindest/node:v1.19.1@sha256:98cf5288864662e37115e362b23e4369c8c4a408f99cbc06e58ac30ddc721600" failed with error: exit status 2
[31mCommand Output[0m: panic: runtime error: invalid memory address or nil pointer dereference
[signal 0xc0000005 code=0x0 addr=0x30 pc=0x10d59d2]

goroutine 1 [running]:
gitlab.eng.vmware.com/core-build/vctl/pkg/container.StartExistingContainer(0x159a860, 0xc00003e330, 0x0, 0x0, 0xc0002c4370, 0x1, 0x1, 0xc000046101, 0x1, 0xc00033b33d, ...)
        d:/build/ob/bora-17139912/kubernetesdesktop/build/release/win64_vc140/kubernetesdesktop/build/src/vctl/pkg/container„Å®/start.go:144 +0xd2
gitlab.eng.vmware.com/core-build/vctl/pkg/container.RunContainer(0x159a860, 0xc00003e330, 0xc0000363a0, 0x12, 0xc000046180, 0x5c, 0xc0002c4370, 0x1, 0x1, 0xc0001f2e40, ...)
        d:/build/ob/bora-17139912/kubernetesdesktop/build/release/win64_vc140/kubernetesdesktop/build/src/vctl/pkg/container/run.go:47 +0x375
gitlab.eng.vmware.com/core-build/vctl/cmd.glob..func28(0x1ebc3c0, 0xc00022a1c0, 0x1, 0x1c, 0x0, 0x0)
        d:/build/ob/bora-17139912/kubernetesdesktop/build/release/win64_vc140/kubernetesdesktop/build/src/vctl/cmd/run.go:59 +0x1b5
github.com/spf13/cobra.(*Command).execute(0x1ebc3c0, 0xc00022a000, 0x1c, 0x1c, 0x1ebc3c0, 0xc00022a000)
        d:/build/ob/bora-17139912/kubernetesdesktop/build/release/win64_vc140/kubernetesdesktop/build/pkg/mod/gitlab.eng.vmware.com/core-build/mirrors_github_spf13_cobra@v0.0.0-20200421035935-b81270fac540/command.go:827 +0x467
github.com/spf13/cobra.(*Command).ExecuteC(0x1ebfac0, 0x13adfa2, 0x10, 0x0)
        d:/build/ob/bora-17139912/kubernetesdesktop/build/release/win64_vc140/kubernetesdesktop/build/pkg/mod/gitlab.eng.vmware.com/core-build/mirrors_github_spf13_cobra@v0.0.0-20200421035935-b81270fac540/command.go:915 +0x30b
github.com/spf13/cobra.(*Command).Execute(...)
        d:/build/ob/bora-17139912/kubernetesdesktop/build/release/win64_vc140/kubernetesdesktop/build/pkg/mod/gitlab.eng.vmware.com/core-build/mirrors_github_spf13_cobra@v0.0.0-20200421035935-b81270fac540/command.go:865
gitlab.eng.vmware.com/core-build/vctl/cmd.Execute()
        d:/build/ob/bora-17139912/kubernetesdesktop/build/release/win64_vc140/kubernetesdesktop/build/src/vctl/cmd/root.go:55 +0x5d
main.main()
        d:/build/ob/bora-17139912/kubernetesdesktop/build/release/win64_vc140/kubernetesdesktop/build/src/vctl/main.go:13 +0x5e
```

„Ç≥„É≥„ÉÜ„Éä„ÅÆ„Ç§„É°„Éº„Ç∏„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô„ÄÇ

```powershell
PS C:\Users\yasu> vctl images
‚îÄ‚îÄ‚îÄ‚îÄ                                                                                   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ               ‚îÄ‚îÄ‚îÄ‚îÄ 
NAME                                                                                   CREATION TIME               SIZE 
‚îÄ‚îÄ‚îÄ‚îÄ                                                                                   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ               ‚îÄ‚îÄ‚îÄ‚îÄ 
nginx:latest                                                                           2020-11-23T11:44:30+09:00   51.1 MiB
kindest/node@sha256:98cf5288864662e37115e362b23e4369c8c4a408f99cbc06e58ac30ddc721600   2020-11-21T23:22:49+09:00   481.5 MiB
```

kindest/node„ÇíÂâäÈô§„Åó„Å¶„Åø„Åæ„Åô„ÄÇ

```powershell
PS C:\Users\yasu> vctl rmi kindest/node@sha256:98cf5288864662e37115e362b23e4369c8c4a408f99cbc06e58ac30ddc721600
‚îÄ‚îÄ‚îÄ‚îÄ                                                                                   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
NAME                                                                                   RESULT    REASON
‚îÄ‚îÄ‚îÄ‚îÄ                                                                                   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
kindest/node@sha256:98cf5288864662e37115e362b23e4369c8c4a408f99cbc06e58ac30ddc721600   REMOVED
```

„Åì„ÅÆÁä∂ÊÖã„Åß2„Å§ÁõÆ„ÅÆpowershell„ÇíÁµÇ‰∫Ü„Åó„ÄÅÂÜç„Å≥ vctl system stop; vctl system start; vctl kind„ÇíÂÆüË°å„Åó„Åæ„Åô„ÄÇ

```powershell:ÊúÄÂàù„ÅÆPowerShell„ÅÆ„Ç≥„Éû„É≥„Éâ„É©„Ç§„É≥„Å´Êàª„Çä„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åô„Çã
PS C:\Users\yasu> vctl system stop
Stop virtual machine kind-control-plane ...
Virtual machine kind-control-plane is stopped
Terminating container runtime...
ÊàêÂäü: PID 20444 „ÅÆ„Éó„É≠„Çª„Çπ„ÅØÂº∑Âà∂ÁµÇ‰∫Ü„Åï„Çå„Åæ„Åó„Åü„ÄÇ
Container runtime has been stopped.
PS C:\Users\yasu> vctl system start
Preparing storage...
Container storage has been prepared successfully under C:\Users\yasu\.vctl\storage
Preparing container network...
Container network has been prepared successfully using vmnet: vmnet8
Launching container runtime...
Container runtime has been started.
PS C:\Users\yasu> vctl kind
```

ÂÜç„Å≥Êñ∞„Åü„Å´Èñã„ÅÑ„ÅüPowerShell„ÅÆ„Ç≥„Éû„É≥„Éâ„É©„Ç§„É≥„Åßkind„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åó„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇ

```powershell:Âà•„Ç¶„Ç£„É≥„Éâ„Ç¶‰∏ä„Åß„ÄÅkind„ÇØ„É©„Çπ„Çø„Éº„Çí‰ΩúÊàê
PS C:\Users\yasu> kind get clusters
No kind clusters found.
PS C:\Users\yasu> kind create cluster
Creating cluster "kind" ...
 [32m‚úì[0m Ensuring node image (kindest/node:v1.19.1) üñº
 [32m‚úì[0m Preparing nodes üì¶
 [32m‚úì[0m Writing configuration üìú
 [32m‚úì[0m Starting control-plane üïπÔ∏è
 [32m‚úì[0m Installing CNI üîå
 [32m‚úì[0m Installing StorageClass üíæ
Set kubectl context to "kind-kind"
You can now use your cluster with:

kubectl cluster-info --context kind-kind

Thanks for using kind! üòä
```

„Åì„ÅÆÁä∂ÊÖã„Åã„Çâ„ÇÇÁµêÂ±Ä„ÅØ„ÅÜ„Åæ„ÅèÂãï„Åç„Åæ„Åõ„Çì„Åß„Åó„Åü„Åå„ÄÅÂÜçËµ∑Âãï„Åó„Åü„Å®„Åì„ÇçÂïèÈ°å„Å™„ÅèÁ®ºÂãï„Åó„Åæ„Åó„Åü„ÄÇ

# „Åï„ÅÑ„Åî„Å´

kind„ÅØk8sÁí∞Â¢É„Å´„Åµ„Çå„ÇãÁõÆÁöÑ„Åß„ÅØ„ÅäÊâãËªΩ„Åã„ÇÇ„Åó„Çå„Åæ„Åõ„Çì„Åå„ÄÅVMware„ÅÆProÁâà„Çí‰Ωø„Åà„Å∞Ë§áÊï∞„ÅÆVM„ÇíÂà•„ÅÆ„Çµ„Éñ„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Å´Êé•Á∂ö„Åï„Åõ„Çã„Åì„Å®„Åå„Åß„Åç„Çã„ÅÆ„Åß„ÄÅkubespray„Å™„Å©„ÅßÊú¨Áï™„Å®ÂêåÁ≠â„ÅÆÁí∞Â¢É„ÇíÊßãÁØâ„Åó„ÅüÊñπ„Åå‰æøÂà©„Å†„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÇ

